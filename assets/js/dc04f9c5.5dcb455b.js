"use strict";(self.webpackChunkodo_dev=self.webpackChunkodo_dev||[]).push([[1849],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return u}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(a),u=r,h=m["".concat(p,".").concat(u)]||m[u]||d[u]||o;return a?n.createElement(h,i(i({ref:t},c),{},{components:a})):n.createElement(h,i({ref:t},c))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},160:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},metadata:function(){return p},toc:function(){return s},default:function(){return d}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),i=["components"],l={title:"Deploying a Java Open Liberty application with PostgreSQL",sidebar_position:1},p={unversionedId:"tutorials/deploying-java-app-with-database",id:"tutorials/deploying-java-app-with-database",isDocsHomePage:!1,title:"Deploying a Java Open Liberty application with PostgreSQL",description:"This tutorial illustrates deploying a Java Open Liberty application with odo and linking it to an in-cluster PostgreSQL service in a minikube environment.",source:"@site/docs/tutorials/deploying-java-app-with-database.md",sourceDirName:"tutorials",slug:"/tutorials/deploying-java-app-with-database",permalink:"/docs/tutorials/deploying-java-app-with-database",editUrl:"https://github.com/redhat-developer/odo/edit/main/website/docs/tutorials/deploying-java-app-with-database.md",version:"current",sidebarPosition:1,frontMatter:{title:"Deploying a Java Open Liberty application with PostgreSQL",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"JSON Output",permalink:"/docs/command-reference/json-output"},next:{title:"Creating Kubernetes resources using odo",permalink:"/docs/tutorials/create-k8s-resources"}},s=[{value:"Cluster admin",id:"cluster-admin",children:[{value:"Prerequisites",id:"prerequisites",children:[]}]},{value:"Application Developer",id:"application-developer",children:[{value:"Prerequisites",id:"prerequisites-1",children:[]},{value:"Importing the JPA MicroService",id:"importing-the-jpa-microservice",children:[]},{value:"Creating a database to be used by the sample application",id:"creating-a-database-to-be-used-by-the-sample-application",children:[]},{value:"Binding the database and the application",id:"binding-the-database-and-the-application",children:[]}]}],c={toc:s};function d(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This tutorial illustrates deploying a ",(0,o.kt)("a",{parentName:"p",href:"https://openliberty.io/"},"Java Open Liberty")," application with odo and linking it to an in-cluster PostgreSQL service in a minikube environment."),(0,o.kt)("p",null,"There are two roles in this example:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Cluster Admin - Prepare the cluster by installing the required Operators on the cluster."),(0,o.kt)("li",{parentName:"ol"},"Application Developer - Imports a Java application, creates a Database instance, and connect the application to the Database instance.")),(0,o.kt)("h2",{id:"cluster-admin"},"Cluster admin"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"This section assumes that you have installed ",(0,o.kt)("a",{parentName:"li",href:"/docs/getting-started/cluster-setup/kubernetes"},"minikube and configured it"),".")),(0,o.kt)("hr",null),(0,o.kt)("p",null,"We will be using Operators in this guide. An Operator helps in deploying the instances of a given service, for example PostgreSQL, MySQL, Redis."),(0,o.kt)("p",null,'Furthermore, these Operators are "bind-able". Meaning, if they expose information necessary to connect to them, odo can help connect your component to their instances.'),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"/docs/getting-started/cluster-setup/kubernetes"},"Operator installation guide")," to install and configure an Operator on a minikube cluster."),(0,o.kt)("p",null,"The cluster admin must install two Operators into the cluster:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"PostgreSQL Operator"),(0,o.kt)("li",{parentName:"ol"},"Service Binding Operator")),(0,o.kt)("p",null,"We will use ",(0,o.kt)("a",{parentName:"p",href:"https://operatorhub.io/operator/postgresql-operator-dev4devs-com"},"Dev4Devs PostgreSQL Operator")," found on the ",(0,o.kt)("a",{parentName:"p",href:"https://operatorhub.io"},"OperatorHub")," to demonstrate a sample use case. This Operator will be installed in ",(0,o.kt)("inlineCode",{parentName:"p"},"my-postgresql-operator-dev4devs-com")," namespace by default, if you want to use another namespace, make sure that you add your namespace to ",(0,o.kt)("inlineCode",{parentName:"p"},".spec.targetNamespaces")," list in the definition file before installing it. "),(0,o.kt)("details",null,(0,o.kt)("summary",null,"In case of IBM Z & Power, please see below part to install PostgreSQL Operator"),(0,o.kt)("h4",{id:"steps-to-install-dev4devs-postgresql-operator-on-ibm-z-and-power"},"Steps to install Dev4Devs PostgreSQL Operator on IBM Z and Power"),(0,o.kt)("p",null,"Note: Since operator ",(0,o.kt)("a",{parentName:"p",href:"https://operatorhub.io/operator/postgresql-operator-dev4devs-com"},"Dev4Devs PostgreSQL Operator")," is only supported on x86, this section will use operator-registry image and PostgreSQL Operator image which are published on ",(0,o.kt)("inlineCode",{parentName:"p"},"quay.io/ibm")," by default. For Z, use ",(0,o.kt)("a",{parentName:"p",href:"https://quay.io/repository/ibm/operator-registry-s390x"},"operator-registry-s390x image")," and ",(0,o.kt)("a",{parentName:"p",href:"https://quay.io/repository/ibm/postgresql-operator-s390x"},"postgresql-operator-s390x image"),". For Power, use ",(0,o.kt)("a",{parentName:"p",href:"https://quay.io/repository/ibm/operator-registry-ppc64le"},"operator-registry-ppc64le image")," and ",(0,o.kt)("a",{parentName:"p",href:"https://quay.io/repository/ibm/postgresql-operator-ppc64le"},"postgresql-operator-ppc64le image"),"."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create custom CatalogSource")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"oc apply -f https://raw.githubusercontent.com/redhat-developer/odo/main/website/manifests/catalog-source-$(uname -m).yaml\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Install PostgreSQL Operator from custom CatalogSource")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"oc create -f https://raw.githubusercontent.com/redhat-developer/odo/main/website/manifests/postgresql-operator-dev4devs-com-IBM-Z-P.yaml\n"))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note"),": We will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"my-postgresql-operator-dev4devs-com")," namespace for this guide."),(0,o.kt)("h2",{id:"application-developer"},"Application Developer"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"prerequisites-1"},"Prerequisites"),(0,o.kt)("p",null,"This section assumes that you have ",(0,o.kt)("a",{parentName:"p",href:"/docs/getting-started/installation"},"installed ",(0,o.kt)("inlineCode",{parentName:"a"},"odo")),"."),(0,o.kt)("hr",null),(0,o.kt)("p",null,"Since the PostgreSQL Operator installed in above step is available only in ",(0,o.kt)("inlineCode",{parentName:"p"},"my-postgresql-operator-dev4devs-com")," namespace, ensure that odo uses this namespace to perform any tasks:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo project set my-postgresql-operator-dev4devs-com\n")),(0,o.kt)("p",null,"If you installed the Operator in a different namespace, ensure that odo uses it to perform any tasks:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo project set <your-namespace>\n")),(0,o.kt)("h3",{id:"importing-the-jpa-microservice"},"Importing the JPA MicroService"),(0,o.kt)("p",null,"In this example we will use odo to manage a sample ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenLiberty/application-stack-samples.git"},"Java JPA MicroService application"),"."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Clone the sample application to your system:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/OpenLiberty/application-stack-samples.git\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to the sample JPA app directory:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"cd ./application-stack-samples/jpa\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Initialize the application:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo create java-openliberty mysboproj\n")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"java-openliberty")," is the type of your application and ",(0,o.kt)("inlineCode",{parentName:"p"},"mysboproj")," is the name of your application.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Deploy the application to the cluster:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo push --show-log\n")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Troubleshooting"),":\nThe Open Liberty image used by this application is relatively large(~850 MB), and depending on your internet connection, it might fail to download within the BuildTimeout set by odo; default timeout is 300 seconds."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'$ odo push   \nValidation\n\u2713  Validating the devfile [45508ns]\n\nUpdating services\n\u2713  Services and Links are in sync with the cluster, no changes are required\n\nCreating Kubernetes resources for component mysboproj\n\u2717  Waiting for component to start [5m]\n\u2717  Failed to start component with name "mysboproj". Error: Failed to create the component: error while waiting for deployment rollout: timeout while waiting for mysboproj-app deployment roll out\n')),(0,o.kt)("p",{parentName:"li"},"In case this step fails due to a timeout, consider increasing the Build Timeout:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo preference set BuildTimeout 600\n")),(0,o.kt)("p",{parentName:"li"},"Deploy the application to the cluster again:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo push --show-log -f\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The application is now deployed to the cluster - you can view the status of the cluster, and the application test results by streaming the cluster logs of the component that we pushed to the cluster in the previous step."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo log --follow\n")),(0,o.kt)("p",{parentName:"li"}," Notice the failing tests due to an ",(0,o.kt)("inlineCode",{parentName:"p"},"UnknownDatabaseHostException"),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"[INFO] [err] java.net.UnknownHostException: ${DATABASE_CLUSTERIP}\n[INFO] [err]    at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:220)\n[INFO] [err]    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:403)\n[INFO] [err]    at java.base/java.net.Socket.connect(Socket.java:609)\n[INFO] [err]    at org.postgresql.core.PGStream.<init>(PGStream.java:68)\n[INFO] [err]    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:144)\n[INFO] [err]    ... 86 more\n[ERROR] Tests run: 2, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 0.706 s <<< FAILURE! - in org.example.app.it.DatabaseIT\n[ERROR] testGetAllPeople  Time elapsed: 0.33 s  <<< FAILURE!\norg.opentest4j.AssertionFailedError: Expected at least 2 people to be registered, but there were only: [] ==> expected: <true> but was: <false>\nat org.example.app.it.DatabaseIT.testGetAllPeople(DatabaseIT.java:57)\n\n[ERROR] testGetPerson  Time elapsed: 0.047 s  <<< ERROR!\njava.lang.NullPointerException\nat org.example.app.it.DatabaseIT.testGetPerson(DatabaseIT.java:41)\n\n[INFO]\n[INFO] Results:\n[INFO]\n[ERROR] Failures:\n[ERROR]   DatabaseIT.testGetAllPeople:57 Expected at least 2 people to be registered, but there were only: [] ==> expected: <true> but was: <false>\n[ERROR] Errors:\n[ERROR]   DatabaseIT.testGetPerson:41 NullPointer\n[INFO]\n[ERROR] Tests run: 2, Failures: 1, Errors: 1, Skipped: 0\n[INFO]\n[ERROR] Integration tests failed: There are test failures.\n")),(0,o.kt)("p",{parentName:"li"},"Note: This error will be fixed at a later stage in the tutorial when we connect a database instance to this application.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You can also create a URL with ",(0,o.kt)("inlineCode",{parentName:"p"},"odo")," to access the application:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo url create --host $(minikube ip).nip.io\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Push the URL to activate it:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo push --show-log\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Display the created URL:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo url list\n")),(0,o.kt)("p",{parentName:"li"},"You will see a fully formed URL that can be used in a web browser:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ odo url list\nFound the following URLs for component mysboproj\nNAME               STATE      URL                                           PORT     SECURE     KIND\nmysboproj-9080     Pushed     http://mysboproj-9080.192.168.49.2.nip.io     9080     false      ingress\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Use the URL to navigate to the ",(0,o.kt)("inlineCode",{parentName:"p"},"CreatePerson.xhtml")," data entry page to use the application:\nIn case of this tutorial, we will access ",(0,o.kt)("inlineCode",{parentName:"p"},"http://mysboproj-9080.192.168.49.2.nip.io/CreatePerson.xhtml"),". Note that the URL could be different for you. Now, enter a name and age data using the form.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the ",(0,o.kt)("strong",{parentName:"p"},"Save")," button when complete"))),(0,o.kt)("p",null,'Note that the entry of any data does not result in the data being displayed when you click on the "View Persons Record List" link, until we connect the application to a database.'),(0,o.kt)("h3",{id:"creating-a-database-to-be-used-by-the-sample-application"},"Creating a database to be used by the sample application"),(0,o.kt)("p",null,"You can use the default configuration of the PostgreSQL Operator to start a Postgre database from it. But since our app uses few specific configuration values, lets make sure they are properly populated in the database service we start."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Store the YAML of the service in a file:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo service create postgresql-operator.v0.1.1/Database --dry-run > db.yaml\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Modify and add following values under ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata:")," section in the ",(0,o.kt)("inlineCode",{parentName:"p"},"db.yaml")," file:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"name: sampledatabase\nannotations:\n  service.binding/db_name: 'path={.spec.databaseName}'\n  service.binding/db_password: 'path={.spec.databasePassword}'\n  service.binding/db_user: 'path={.spec.databaseUser}'\n")),(0,o.kt)("p",{parentName:"li"},"This configuration ensures that when a database service is started using this file, appropriate annotations are added to it. Annotations help the Service Binding Operator in injecting those values into the application. Hence, the above configuration will help Service Binding Operator inject the values for ",(0,o.kt)("inlineCode",{parentName:"p"},"databaseName"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"databasePassword")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"databaseUser")," into the application.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Change the following values under ",(0,o.kt)("inlineCode",{parentName:"p"},"spec:")," section of the YAML file:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'databaseName: "sampledb"\ndatabasePassword: "samplepwd"\ndatabaseUser: "sampleuser"\n'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create the database from the YAML file:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo service create --from-file db.yaml\n")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"}," odo push --show-log\n")),(0,o.kt)("p",{parentName:"li"}," This action will create a database instance pod in the ",(0,o.kt)("inlineCode",{parentName:"p"},"my-postgresql-operator-dev4devs-com")," namespace. The application will be configured to use this database."))),(0,o.kt)("h3",{id:"binding-the-database-and-the-application"},"Binding the database and the application"),(0,o.kt)("p",null,"Now, the only thing that remains is to connect the DB and the application. We will use odo to create a link to the PostgreSQL Database Operator in order to access the database connection information."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"List the service associated with the database created via the PostgreSQL Operator:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo service list\n")),(0,o.kt)("p",{parentName:"li"},"Your output should look similar to the following:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ odo service list\n NAME                       MANAGED BY ODO     STATE     AGE\n Database/sampledatabase   Yes (mysboproj)    Pushed    6m35s\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a Service Binding Request between the application, and the database using the Service Binding Operator service created in the previous step:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo link Database/sampledatabase\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Push this link to the cluster:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"odo push --show-log\n")),(0,o.kt)("p",{parentName:"li"}," After the link has been created and pushed, a secret will have been created containing the database connection data that the application requires."),(0,o.kt)("p",{parentName:"li"}," You can inspect the new intermediate secret via the dashboard console in the ",(0,o.kt)("inlineCode",{parentName:"p"},"my-postgresql-operator-dev4devs-com")," namespace by navigating to Secrets and clicking on the secret named ",(0,o.kt)("inlineCode",{parentName:"p"},"mysboproj-database-sampledatabase"),": notice that it contains 4 pieces of data that are related to the connection information for your PostgreSQL database instance."),(0,o.kt)("p",{parentName:"li"},"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"minikube dashboard")," to launch the dashboard console."),(0,o.kt)("p",{parentName:"li"}," Note: Pushing the newly created link will terminate the existing application pod and start a new application pod that mounts this secret.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Once the new pod has initialized, you can see the secret database connection data as it is injected into the pod environment by executing the following:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'odo exec -- bash -c \'export | grep DATABASE\' \\\ndeclare -x DATABASE_CLUSTERIP="10.106.182.173" \\\ndeclare -x DATABASE_DB_NAME="sampledb" \\\ndeclare -x DATABASE_DB_PASSWORD="samplepwd" \\\ndeclare -x DATABASE_DB_USER="sampleuser"\n')),(0,o.kt)("p",{parentName:"li"},"Once the new version is up (there will be a slight delay until the application is available), navigate to the ",(0,o.kt)("inlineCode",{parentName:"p"},"CreatePerson.xhtml")," using the URL created in a previous step. Enter the requested data and click the ",(0,o.kt)("strong",{parentName:"p"},"Save")," button."),(0,o.kt)("p",{parentName:"li"},"Notice that you are re-directed to the ",(0,o.kt)("inlineCode",{parentName:"p"},"PersonList.xhtml")," page, where your data is displayed having been input to the postgreSQL database and retrieved for display purposes."),(0,o.kt)("p",{parentName:"li"},"You may inspect the database instance itself and query the table to see the data in place by using the postgreSQL command line tool, ",(0,o.kt)("inlineCode",{parentName:"p"},"psql"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Navigate to the pod containing your db from the dashboard console. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"minikube dashboard")," to start the console.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the terminal tab.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"At the terminal prompt access ",(0,o.kt)("inlineCode",{parentName:"p"},"psql")," for your database ",(0,o.kt)("inlineCode",{parentName:"p"},"sampledb"),"."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"psql sampledb\n")),(0,o.kt)("p",{parentName:"li"},"Your output should look similar to the following:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'sh-4.2$ psql sampledb\npsql (12.3)\nType "help" for help.\n\nsampledb=#\n'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Issue the following SQL statement from your :"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-postgresql"},"SELECT * FROM person;\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You can see the data that appeared in the results of the test run:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"sampledb=# SELECT * FROM person;\n\npersonid | age |  name   \n----------+-----+---------\n5 |  52 | person1\n(1 row)\n")))))}d.isMDXComponent=!0}}]);