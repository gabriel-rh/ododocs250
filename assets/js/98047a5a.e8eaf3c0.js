"use strict";(self.webpackChunkodo_dev=self.webpackChunkodo_dev||[]).push([[1667],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||a;return n?o.createElement(h,i(i({ref:t},d),{},{components:n})):o.createElement(h,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8452:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return l},toc:function(){return c},default:function(){return u}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),i=["components"],s={title:"Creating Kubernetes resources",sidebar_position:2},l={unversionedId:"tutorials/create-k8s-resources",id:"tutorials/create-k8s-resources",isDocsHomePage:!1,title:"Creating Kubernetes resources using odo",description:"While odo is mainly focused on application developers who would like to care less about Kubernetes and more about getting their application running on top of it, it also tries to make things simple for application architects or devfile stack authors who are comfortable with Kubernetes. One such feature of odo that we will discuss in this guide is creation of Kubernetes resources like Pods, Deployments, Services (Kubernetes Services, not the Operator backed ones) and such using odo. Using this, if an advanced user would like to create some Kubernetes resources, they could edit the devfile.yaml and add it there. An odo push after the edit would create the resource on the cluster. A resource thus created would co-exist with an odo component.",source:"@site/docs/tutorials/create-k8s-resources.md",sourceDirName:"tutorials",slug:"/tutorials/create-k8s-resources",permalink:"/ododocs250/docs/tutorials/create-k8s-resources",editUrl:"https://github.com/redhat-developer/odo/edit/main/website/docs/tutorials/create-k8s-resources.md",version:"current",sidebarPosition:2,frontMatter:{title:"Creating Kubernetes resources",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Deploying a Java Open Liberty application with PostgreSQL",permalink:"/ododocs250/docs/tutorials/deploying-java-app-with-database"},next:{title:"Using odo on IBM-Z and Power",permalink:"/ododocs250/docs/tutorials/deploying-a-devfile-using-odo-on-IBM-Z-and-Power"}},c=[{value:"Create an odo component",id:"create-an-odo-component",children:[]},{value:"Reference the Deployment manifest in <code>devfile.yaml</code>",id:"reference-the-deployment-manifest-in-devfileyaml",children:[]},{value:"Push to the cluster",id:"push-to-the-cluster",children:[]},{value:"Good to know",id:"good-to-know",children:[]}],d={toc:c};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"While odo is mainly focused on application developers who would like to care less about Kubernetes and more about getting their application running on top of it, it also tries to make things simple for application architects or devfile stack authors who are comfortable with Kubernetes. One such feature of odo that we will discuss in this guide is creation of Kubernetes resources like Pods, Deployments, Services (Kubernetes Services, not the Operator backed ones) and such using odo. Using this, if an advanced user would like to create some Kubernetes resources, they could edit the ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml")," and add it there. An ",(0,a.kt)("inlineCode",{parentName:"p"},"odo push")," after the edit would create the resource on the cluster. A resource thus created would co-exist with an odo component. "),(0,a.kt)("p",null,"In this guide, we will create an nginx Deployment using its Kubernetes manifest. We will write this manifest in the ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml"),". Upon doing ",(0,a.kt)("inlineCode",{parentName:"p"},"odo push"),", you will be able to see a Deployment and its Pods along with the component on the Kubernetes cluster using ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl")," commands."),(0,a.kt)("h2",{id:"create-an-odo-component"},"Create an odo component"),(0,a.kt)("p",null,"As with other resources like URL, Storage and Services, to create a Kubernetes resource, we first need to have an odo component. We will keep it simple by using a nodejs starter project. In an empty directory, create a component using:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo create nodejs --starter nodejs-starter\n")),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ odo create nodejs --starter nodejs-starter\nDevfile Object Validation\n \u2713  Checking devfile existence [52416ns]\n \u2713  Creating a devfile component from registry: stage [95517ns]\nValidation\n \u2713  Validating if devfile name is correct [97488ns]\n\nStarter Project\n \u2713  Downloading starter project nodejs-starter from https://github.com/odo-devfiles/nodejs-ex.git [593ms]\n\nPlease use `odo push` command to create the component with source deployed\n")),(0,a.kt)("h2",{id:"reference-the-deployment-manifest-in-devfileyaml"},"Reference the Deployment manifest in ",(0,a.kt)("inlineCode",{parentName:"h2"},"devfile.yaml")),(0,a.kt)("p",null,"odo supports referencing a URI in the ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml")," so that you don't have to copy the entire manifest into it. Assuming you have a Deployment manifest like below stored in a file called ",(0,a.kt)("inlineCode",{parentName:"p"},"deployment.yaml"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  labels:\n    app: nginx\nspec:\n    replicas: 3\n    selector:\n      matchLabels:\n        app: nginx\n    template:\n      metadata:\n        labels:\n          app: nginx\n      spec:\n        containers:\n          - name: nginx\n            image: quay.io/bitnami/nginx\n            ports:\n              - containerPort: 80\n")),(0,a.kt)("p",null,"Add below to the ",(0,a.kt)("inlineCode",{parentName:"p"},"components")," section in ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml"),". Note that there is already a ",(0,a.kt)("inlineCode",{parentName:"p"},"runtime")," component in this section:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"- name: nginx-deploy\n  kubernetes:\n    uri: deployment.yaml\n")),(0,a.kt)("h2",{id:"push-to-the-cluster"},"Push to the cluster"),(0,a.kt)("p",null,"Now you need to do ",(0,a.kt)("inlineCode",{parentName:"p"},"odo push"),". odo will create the component and also the nginx deployment for you on the cluster. Note that, unlike for Operator backed service, odo won't show you any message indicating that a service or some resource was created on the cluster. This is by design because the feature is meant for advanced users who can play with resources created in this way through ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl")," CLI. However, if odo fails to create a resource, it will error out and let you know about it."),(0,a.kt)("p",null,"See if the Deployment and its Pods were created on the cluster using:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get deploy\nkubectl get pods\n")),(0,a.kt)("h2",{id:"good-to-know"},"Good to know"),(0,a.kt)("p",null,"odo adds a Kubernetes label to the resources created in this way. It is ",(0,a.kt)("inlineCode",{parentName:"p"},"app.kubernetes.io/managed-by: odo"),". odo also sets the ",(0,a.kt)("inlineCode",{parentName:"p"},"ownerReferences")," for such objects to the underlying odo component so that when you do ",(0,a.kt)("inlineCode",{parentName:"p"},"odo delete"),", such resources are deleted from the cluster. Other than that, odo doesn't help in managing such resources and users are expected to know how to do so."))}u.isMDXComponent=!0}}]);